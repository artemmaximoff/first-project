{"ast":null,"code":"import _objectSpread from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Profile from'./profile';import{connect}from'react-redux';import{getProfile,getStatus,updateStatus,savePhoto,changeInfo}from'../../redux/profilePage_reducer';import{withAuthRiderect}from'../../hoc/withAuthRiderect';import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{compose}from'redux';import{jsx as _jsx}from\"react/jsx-runtime\";var ProfileContainer=/*#__PURE__*/function(_React$Component){_inherits(ProfileContainer,_React$Component);var _super=_createSuper(ProfileContainer);function ProfileContainer(){_classCallCheck(this,ProfileContainer);return _super.apply(this,arguments);}_createClass(ProfileContainer,[{key:\"refreshProfile\",value:function refreshProfile(){var userId=this.props.router.params.userId;if(!userId){userId=this.props.autorisedId;if(!userId){this.props.history.push(\"/login\");}}this.props.getProfile(userId);this.props.getStatus(userId);/*profileAPI.getProfile(userId).then(data => {\r\n            this.props.setUserProfile(data);\r\n        })*/}},{key:\"componentDidMount\",value:function componentDidMount(){this.refreshProfile();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(this.props.router.params.userId!=prevProps.router.params.userId){this.refreshProfile();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Profile,_objectSpread(_objectSpread({},this.props),{},{isOwner:!this.props.router.params.userId}));}}]);return ProfileContainer;}(React.Component);var AuthRedirectComponent=withAuthRiderect(ProfileContainer);var mapStateToProps=function mapStateToProps(state){return{profile:state.profilePage.profile,status:state.profilePage.status,isAuth:state.auth.isAuth,autorisedId:state.auth.id};};function withRouter(AuthRedirectComponent){function ComponentWithRouterProp(props){var location=useLocation();var navigate=useNavigate();var params=useParams();return/*#__PURE__*/_jsx(AuthRedirectComponent,_objectSpread(_objectSpread({},props),{},{router:{location:location,navigate:navigate,params:params}}));}return ComponentWithRouterProp;}export default compose(connect(mapStateToProps,{getProfile:getProfile,getStatus:getStatus,updateStatus:updateStatus,savePhoto:savePhoto,changeInfo:changeInfo}),withAuthRiderect,withRouter)(ProfileContainer);","map":{"version":3,"names":["React","Profile","connect","getProfile","getStatus","updateStatus","savePhoto","changeInfo","withAuthRiderect","useLocation","useNavigate","useParams","compose","ProfileContainer","userId","props","router","params","autorisedId","history","push","refreshProfile","prevProps","prevState","Component","AuthRedirectComponent","mapStateToProps","state","profile","profilePage","status","isAuth","auth","id","withRouter","ComponentWithRouterProp","location","navigate"],"sources":["D:/react_projects/01-first-project/my-app/src/components/profile/profileContiner.jsx"],"sourcesContent":["import React from 'react';\r\nimport Profile from './profile';\r\nimport { connect } from 'react-redux';\r\nimport { getProfile, getStatus, updateStatus, savePhoto, changeInfo } from '../../redux/profilePage_reducer';\r\nimport { withAuthRiderect } from '../../hoc/withAuthRiderect'\r\nimport {\r\n    useLocation,\r\n    useNavigate,\r\n    useParams,\r\n} from \"react-router-dom\"\r\nimport { compose } from 'redux';\r\n\r\n\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    refreshProfile() {\r\n        let userId = this.props.router.params.userId;\r\n        if (!userId) {\r\n            userId = this.props.autorisedId;\r\n            if (!userId) {\r\n                this.props.history.push(\"/login\")\r\n            }\r\n        }\r\n        this.props.getProfile(userId)\r\n\r\n        this.props.getStatus(userId)\r\n\r\n        /*profileAPI.getProfile(userId).then(data => {\r\n            this.props.setUserProfile(data);\r\n        })*/\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.router.params.userId != prevProps.router.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n        return (\r\n            <Profile {...this.props}\r\n                isOwner={!this.props.router.params.userId}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nlet AuthRedirectComponent = withAuthRiderect(ProfileContainer);\r\n\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    isAuth: state.auth.isAuth,\r\n    autorisedId: state.auth.id,\r\n\r\n\r\n});\r\n\r\nfunction withRouter(AuthRedirectComponent) {\r\n    function ComponentWithRouterProp(props) {\r\n        let location = useLocation();\r\n        let navigate = useNavigate();\r\n        let params = useParams();\r\n        return (\r\n            <AuthRedirectComponent\r\n                {...props}\r\n                router={{ location, navigate, params }}\r\n            />\r\n        );\r\n    }\r\n    return ComponentWithRouterProp;\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, { getProfile, getStatus, updateStatus, savePhoto, changeInfo }),\r\n    withAuthRiderect,\r\n    withRouter,\r\n\r\n)(ProfileContainer)"],"mappings":"0mBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,YAAhC,CAA8CC,SAA9C,CAAyDC,UAAzD,KAA2E,iCAA3E,CACA,OAASC,gBAAT,KAAiC,4BAAjC,CACA,OACIC,WADJ,CAEIC,WAFJ,CAGIC,SAHJ,KAIO,kBAJP,CAKA,OAASC,OAAT,KAAwB,OAAxB,C,8CAIMC,iB,mSAEF,yBAAiB,CACb,GAAIC,OAAM,CAAG,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,CAAyBH,MAAtC,CACA,GAAI,CAACA,MAAL,CAAa,CACTA,MAAM,CAAG,KAAKC,KAAL,CAAWG,WAApB,CACA,GAAI,CAACJ,MAAL,CAAa,CACT,KAAKC,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACH,CACJ,CACD,KAAKL,KAAL,CAAWZ,UAAX,CAAsBW,MAAtB,EAEA,KAAKC,KAAL,CAAWX,SAAX,CAAqBU,MAArB,EAEA;AACR;AACA,YACK,C,iCAED,4BAAoB,CAChB,KAAKO,cAAL,GAEH,C,kCAED,4BAAmBC,SAAnB,CAA8BC,SAA9B,CAAyC,CACrC,GAAI,KAAKR,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,CAAyBH,MAAzB,EAAmCQ,SAAS,CAACN,MAAV,CAAiBC,MAAjB,CAAwBH,MAA/D,CAAuE,CACnE,KAAKO,cAAL,GACH,CACJ,C,sBAED,iBAAS,CAGL,mBACI,KAAC,OAAD,gCAAa,KAAKN,KAAlB,MACI,OAAO,CAAE,CAAC,KAAKA,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,CAAyBH,MADvC,GADJ,CAKH,C,8BAtC0Bd,KAAK,CAACwB,S,EAyCrC,GAAIC,sBAAqB,CAAGjB,gBAAgB,CAACK,gBAAD,CAA5C,CAGA,GAAIa,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,KAAD,QAAY,CAC9BC,OAAO,CAAED,KAAK,CAACE,WAAN,CAAkBD,OADG,CAE9BE,MAAM,CAAEH,KAAK,CAACE,WAAN,CAAkBC,MAFI,CAG9BC,MAAM,CAAEJ,KAAK,CAACK,IAAN,CAAWD,MAHW,CAI9Bb,WAAW,CAAES,KAAK,CAACK,IAAN,CAAWC,EAJM,CAAZ,EAAtB,CASA,QAASC,WAAT,CAAoBT,qBAApB,CAA2C,CACvC,QAASU,wBAAT,CAAiCpB,KAAjC,CAAwC,CACpC,GAAIqB,SAAQ,CAAG3B,WAAW,EAA1B,CACA,GAAI4B,SAAQ,CAAG3B,WAAW,EAA1B,CACA,GAAIO,OAAM,CAAGN,SAAS,EAAtB,CACA,mBACI,KAAC,qBAAD,gCACQI,KADR,MAEI,MAAM,CAAE,CAAEqB,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAsBpB,MAAM,CAANA,MAAtB,CAFZ,GADJ,CAMH,CACD,MAAOkB,wBAAP,CACH,CAED,cAAevB,QAAO,CAClBV,OAAO,CAACwB,eAAD,CAAkB,CAAEvB,UAAU,CAAVA,UAAF,CAAcC,SAAS,CAATA,SAAd,CAAyBC,YAAY,CAAZA,YAAzB,CAAuCC,SAAS,CAATA,SAAvC,CAAkDC,UAAU,CAAVA,UAAlD,CAAlB,CADW,CAElBC,gBAFkB,CAGlB0B,UAHkB,CAAP,CAKbrB,gBALa,CAAf"},"metadata":{},"sourceType":"module"}