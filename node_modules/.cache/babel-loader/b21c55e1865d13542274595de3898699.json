{"ast":null,"code":"import _asyncToGenerator from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/react_projects/01-first-project/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:\\\\react_projects\\\\01-first-project\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{profileAPI}from'../api/api';var ADD_POST='ADD-POST';var DELETE_POST='DELETE-POST';var SET_USERS_PROFILE='SET-USERS-PROFILE';var SET_USERS_STATUS='SET-USERS-STATUS';var SAVE_PHOTO='SET-PHOTO';var initialState={recentPostData:[{id:1,message:'Hi, How are you?',likesqnt:'12'},{id:2,message:\"It's my first post!\",likesqnt:'1'}],profile:null,status:''};var profilePageReducer=function profilePageReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var newPost={id:5,message:action.newPostBody,likesqnt:0};return _objectSpread(_objectSpread({},state),{},{recentPostData:[newPost].concat(_toConsumableArray(state.recentPostData))});case DELETE_POST:return _objectSpread(_objectSpread({},state),{},{recentPostData:state.recentPostData.filter(function(p){return p.id!=action.postId;})});case SET_USERS_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_USERS_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case SAVE_PHOTO:{return _objectSpread(_objectSpread({},state),{},{profile:_objectSpread(_objectSpread({},state.profile),{},{photos:action.photos})});}default:return state;}};export var addPostCreator=function addPostCreator(newPostBody){return{type:ADD_POST,newPostBody:newPostBody};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USERS_PROFILE,profile:profile};};export var setUsersStatus=function setUsersStatus(status){return{type:SET_USERS_STATUS,status:status};};export var savePhotoSuccess=function savePhotoSuccess(photos){return{type:SAVE_PHOTO,photos:photos};};export var getProfile=function getProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return profileAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUserProfile(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setUsersStatus(response.data));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setUsersStatus(status));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var savePhoto=function savePhoto(file){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return profileAPI.savePhoto(file);case 2:response=_context4.sent;if(response.data.resultCode===0){dispatch(savePhotoSuccess(response.data.data.photos));}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var changeInfo=function changeInfo(profile,setStatus){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var userId,response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:userId=getState().auth.id;_context5.next=3;return profileAPI.changeInfo(profile);case 3:response=_context5.sent;if(!(response.data.resultCode===0)){_context5.next=8;break;}dispatch(getProfile(userId));_context5.next=10;break;case 8:setStatus(response.data.messages);return _context5.abrupt(\"return\",Promise.reject(response.data.messages));case 10:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5,_x6){return _ref5.apply(this,arguments);};}();};export default profilePageReducer;","map":{"version":3,"sources":["D:/react_projects/01-first-project/my-app/src/redux/profilePage_reducer.js"],"names":["profileAPI","ADD_POST","DELETE_POST","SET_USERS_PROFILE","SET_USERS_STATUS","SAVE_PHOTO","initialState","recentPostData","id","message","likesqnt","profile","status","profilePageReducer","state","action","type","newPost","newPostBody","filter","p","postId","photos","addPostCreator","deletePost","setUserProfile","setUsersStatus","savePhotoSuccess","getProfile","userId","dispatch","response","data","getStatus","updateStatus","resultCode","savePhoto","file","changeInfo","setStatus","getState","auth","messages","Promise","reject"],"mappings":"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","sourcesContent":["import { profileAPI } from '../api/api';\r\n\r\nconst ADD_POST = 'ADD-POST'\r\nconst DELETE_POST = 'DELETE-POST'\r\nconst SET_USERS_PROFILE = 'SET-USERS-PROFILE'\r\nconst SET_USERS_STATUS = 'SET-USERS-STATUS'\r\nconst SAVE_PHOTO = 'SET-PHOTO'\r\n\r\nlet initialState = {\r\n    recentPostData: [\r\n        { id: 1, message: 'Hi, How are you?', likesqnt: '12' },\r\n        { id: 2, message: \"It's my first post!\", likesqnt: '1' }\r\n    ],\r\n    profile: null,\r\n    status: ''\r\n\r\n};\r\n\r\nconst profilePageReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost = {\r\n                id: 5,\r\n                message: action.newPostBody,\r\n                likesqnt: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                recentPostData: [newPost, ...state.recentPostData],\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                recentPostData: state.recentPostData.filter(p => p.id != action.postId),\r\n            }\r\n\r\n        case SET_USERS_PROFILE: {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_USERS_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case SAVE_PHOTO: {\r\n            return {\r\n                ...state,\r\n                profile: { ...state.profile, photos: action.photos }\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const addPostCreator = (newPostBody) => ({ type: ADD_POST, newPostBody });\r\nexport const deletePost = (postId) => ({ type: DELETE_POST, postId })\r\nexport const setUserProfile = (profile) => ({ type: SET_USERS_PROFILE, profile })\r\nexport const setUsersStatus = (status) => ({ type: SET_USERS_STATUS, status })\r\nexport const savePhotoSuccess = (photos) => ({ type: SAVE_PHOTO, photos })\r\n\r\n\r\nexport const getProfile = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getProfile(userId);\r\n    dispatch(setUserProfile(response.data));\r\n\r\n}\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId);\r\n    dispatch(setUsersStatus(response.data));\r\n}\r\n\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(status);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setUsersStatus(status))\r\n    }\r\n}\r\n\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos))\r\n    }\r\n}\r\n\r\n\r\nexport const changeInfo = (profile, setStatus) => async (dispatch, getState) => {\r\n    const userId = getState().auth.id\r\n    const response = await profileAPI.changeInfo(profile);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getProfile(userId))\r\n    } else {\r\n        setStatus(response.data.messages);\r\n        return Promise.reject(response.data.messages)\r\n    }\r\n}\r\n\r\nexport default profilePageReducer;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}